<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»»åŠ¡è¯¦æƒ… - {{ task.id }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“‹ ä»»åŠ¡è¯¦æƒ…</h1>
            <p>ä»»åŠ¡ID: {{ task.id }}</p>
        </div>
        
        <div class="content">
            <div class="task-info">
                <h2>ä»»åŠ¡ä¿¡æ¯</h2>
                
                <div class="task-stats">
                    <div class="stat-card total">
                        <h3>æ€»é‡</h3>
                        <div class="value">{{ task.total_count }}</div>
                    </div>
                    <div class="stat-card completed">
                        <h3>å·²å®Œæˆ</h3>
                        <div class="value">{{ task.completed_count }}</div>
                    </div>
                    <div class="stat-card existing">
                        <h3>å·²å­˜åœ¨</h3>
                        <div class="value">{{ task.existing_count }}</div>
                    </div>
                    <div class="stat-card remaining">
                        <h3>å‰©ä½™</h3>
                        <div class="value">{{ task.remaining_count }}</div>
                    </div>
                </div>
                
                <div class="task-status {% if task.status == 'completed' %}status-completed{% elif task.status == 'stopped' %}status-stopped{% else %}status-in-progress{% endif %}" data-status="{{ task.status }}">
                    {% if task.status == 'completed' %}âœ… å·²å®Œæˆ{% elif task.status == 'stopped' %}ğŸ›‘ å·²åœæ­¢{% else %}ğŸ”„ è¿›è¡Œä¸­{% endif %}
                </div>
                
                <div class="task-actions">
                    <a href="{{ url_for('index') }}" class="action-btn back-btn">è¿”å›åˆ—è¡¨</a>
                    {% if task.status == 'running' %}
                        <button class="action-btn stop-btn" onclick="stopTask('{{ task.id }}')">åœæ­¢ä»»åŠ¡</button>
                    {% elif task.status == 'stopped' %}
                        <button class="action-btn start-btn" onclick="restartTask('{{ task.id }}')">å¼€å§‹ä»»åŠ¡</button>
                    {% endif %}
                </div>
                
                <div class="refresh-control">
                    <div class="refresh-toggle">
                        <input type="checkbox" id="autoRefresh" onchange="toggleAutoRefresh()" {% if task.status == 'running' %}checked{% endif %} {% if task.status == 'completed' or task.status == 'stopped' %}disabled{% endif %}>
                        <label for="autoRefresh">è‡ªåŠ¨åˆ·æ–°</label>
                    </div>
                    <div class="refresh-status {% if task.status == 'running' %}refresh-active{% else %}refresh-inactive{% endif %}">
                        {% if task.status == 'running' %}ğŸ”„ åˆ·æ–°ä¸­{% else %}â¸ï¸ å·²æš‚åœ{% endif %}
                    </div>
                </div>
            </div>
            
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ğŸ“± æ‰‹æœºå·</th>
                            <th>ğŸ“Š çŠ¶æ€</th>
                            <th>ğŸ“ ç»“æœ</th>
                            <th>â° åˆ›å»ºæ—¶é—´</th>
                        </tr>
                    </thead>
                    <tbody id="accountsTableBody">
                        {% for account in accounts %}
                            <tr>
                                <td>{{ account[0] }}</td>
                                <td>
                                    <span class="status-{{ account[1] }}">
                                        {% if account[1] == 'pending' %}â³ å¾…å¤„ç†
                                        {% elif account[1] == 'completed' %}âœ… å·²å®Œæˆ
                                        {% elif account[1] == 'existing' %}ğŸ‘¤ å·²å­˜åœ¨
                                        {% else %}âŒ {{ account[1] }}{% endif %}
                                    </span>
                                </td>
                                <td>{{ account[2] }}</td>
                                <td>{{ account[3] }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/common.js') }}"></script>
    <script src="{{ url_for('static', filename='js/task_details.js') }}"></script>
</body>
</html>